<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz Play</title>
    <link rel="stylesheet" href="../../assets/css/common.css" />
    <link rel="stylesheet" href="../../assets/css/header.css" />
    <link rel="stylesheet" href="../../assets/css/footer.css" />
    <link rel="stylesheet" href="../../assets/css/sideBannner.css" />
    <link rel="stylesheet" href="../../assets/css/quizePlay.css" />

    <script
      async
      src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"
    ></script>
    <script src="../../adscripts/quizTcz_interstial.js"></script>
    <script src="../../adscripts/quizTcz_reward.js"></script>
    <script src="../../adscripts/quizTcz_top.js"></script>
  </head>

  <body>
    <!-- interstitial_ad -->
    <script>
      googletag.cmd.push(() => {
        // Ensure the first call to display comes after static ad slot
        // divs are defined. If you do not have any static ad slots, this
        // call can be made immediately after services are enabled.
        googletag.display(interstitialSlot);
      });
    </script>
    <header class="headerContainer">
      <a href="/home/" class="logo">
        <img
          src="../../assets/images/svg/logo.svg"
          alt="logo"
          class="logo-image"
          loading="lazy"
      /></a>
      <div class="dailyReward">
        <img
          src="../../assets/images/gif/reward.gif"
          al
          t="coin"
          class="coin-image"
          loading="lazy"
        />
        <p>Daily Reward</p>
      </div>
      <div class="totalCoins">
        <img
          src="../../assets/images/svg/headerCoin.svg"
          alt="coin"
          class="coin-image"
          loading="lazy"
        />
        <p id="totalCoinsDisplay">0 <span>COINS</span></p>
      </div>
    </header>
    <div class="mainContainer">
      <section class="categoriesSection">
        <!-- /23201071713/quizTcz_top -->
        <div class="header_space">
          <div
            id="div-gpt-ad-1737541278768-0"
            style="min-width: 300px; min-height: 250px"
          >
            <script>
              googletag.cmd.push(function () {
                googletag.display("div-gpt-ad-1737541278768-0");
              });
            </script>
          </div>
        </div>

        <div class="quiz-container-wrapper">
          <div class="quiz-container">
            <div class="quiz-header">
              <img class="category-image" src="" alt="category" />
              <div>
                <div class="category-title"></div>
                <div class="play-win"></div>
              </div>
            </div>
            <div class="quiz-actions">
              <button class="join-now" id="join-now-btn" onclick="joinNow()">
                JOIN NOW
              </button>

              <div class="or-text" id="or-text">or</div>
              <a
                class="play-as-guest"
                id="play-as-guest"
                onclick="cutEntryFee()"
                >PLAY AS GUEST</a
              >
            </div>
            <ul class="quiz-rules">
              <li>You've got 90 - 150 seconds to answer all questions</li>
              <li>Answer as many questions as you can</li>
              <li>
                For Every Correct answer you will get +50 points and will lose
                -25 points on every Incorrect answer
              </li>
              <li>
                You can take help by using the lifelines present in the contest.
              </li>
              <li>
                Lifelines can be used for free or by using a given amount of
                coins for each lifeline.
              </li>
            </ul>
          </div>
        </div>
        <footer class="footerContainer">
          <a href="/categories/" class="categories">
            <img
              src="../../assets/images/svg/category.svg"
              alt="category"
              class="footerNavIcon"
            />
            <p>Categories</p>
          </a>
          <a href="/home/" class="home">
            <img
              src="../../assets/images/svg/home.svg"
              alt="home"
              class="footerNavIcon"
            />
            <p>Home</p>
          </a>
          <a href="/profile/" class="profile">
            <img
              src="../../assets/images/svg/profile.svg"
              alt="profile"
              class="footerNavIcon"
            />
            <p>Profile</p>
          </a>
        </footer>
      </section>
      <section class="rightSection">
        <img
          src="../../assets/images/svg/sidePoster.svg"
          alt="right-section"
          class="poster-image"
          loading="lazy"
        />
        <div class="welcomeText">
          <h4>Welcome to 5 Minutes Quiz. Play a quiz and earn coins.</h4>
          <h4 class="welcomeSubtext">There's a quiz for everyone!</h4>
        </div>
      </section>

      <div class="rewardModal hidden" id="rewardContainer">
        <div class="rewardBox">
          <div role="button" class="crossIcon" onclick="closeRewardModal()">
            <img
              src="../../assets/images/svg/crossIcon.svg"
              alt="cross"
              id="crossIcon"
            />
          </div>
          <img src="../../../assets/images/adpic.png" alt="reward" />
          <h2 class="NewReward">oops!</h2>
          <p class="NotEnoughText">Not enough coins to play</p>
          <button
            class="watchAdd watchAdButton"
            id="WatchAd"
            data-target="../../categories/quizzesForCategory/quizPlay/quiz/"
            onclick="watchAdd()"
          >
            Watch Ad
          </button>
        </div>
        <div class="toast">
          <div class="toast-content">
            <img
              src="../../assets/images/gif/rewarded.gif"
              alt="alert"
              loading="lazy"
            />
            <div class="message">
              <span class="text text-2">100</span>
            </div>
          </div>
          <img
            src="../../assets/images/svg/crossIcon.svg"
            alt="alert"
            loading="lazy"
            class="close"
            style="height: 14px; width: 16px"
          />
          <div class="progress"></div>
        </div>
      </div>
    </div>

    <!-- Script for showing Current path in Footer Start -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const currentPath = window.location.pathname;
        if (currentPath.includes("categories")) {
          document
            .querySelector(".footerContainer .categories")
            .classList.add("active");
        } else if (currentPath.includes("home")) {
          document
            .querySelector(".footerContainer .home")
            .classList.add("active");
        } else if (currentPath.includes("profile")) {
          document
            .querySelector(".footerContainer .profile")
            .classList.add("active");
        }
      });
    </script>
    <!-- Script for showing Current path in Footer End -->

    <!-- Script For Quizzes Play Start -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const quizData = JSON.parse(localStorage.getItem("selectedQuiz"));
        const totalCoins = localStorage.getItem("TotalCoin") || 0;
        if ("payment" in quizData) {
          delete quizData.payment; // Remove the payment key if it exists
        }
        localStorage.setItem("selectedQuiz", JSON.stringify(quizData));
        if (quizData) {
          document.querySelector(".category-title").textContent =
            quizData.quizTitle;
          document.querySelector(
            ".category-image"
          ).src = `../${quizData.quizImage}`;
          document.querySelector(
            ".play-win"
          ).innerHTML = `Play & Win <img class="coin-image" src="../../../../assets/images/svg/coin.svg" alt="Coin" /> ${quizData.totalPrice}`;
        } else {
          console.error("Quiz data is missing.");
        }
        document.getElementById(
          "totalCoinsDisplay"
        ).innerHTML = `${totalCoins} <span>COINS</span>`;
      });
    </script>
    <!-- Script For Quizzes Play End -->

    <!-- Script For Removing Trailing Slash From URL Start -->
    <script>
      if (window.location.pathname.endsWith("/")) {
        const newURL = window.location.pathname.slice(0, -1);
        history.replaceState({}, "", newURL);
      }
    </script>
    <!-- Script For Removing Trailing Slash From URL End -->

    <!-- Script for the showing the join now button start  -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const loginUser = JSON.parse(localStorage.getItem("CurrentUser"));
        const joinNowBtn = document.getElementById("join-now-btn");
        const orText = document.getElementById("or-text");
        const playAsGuest = document.getElementById("play-as-guest");

        if (loginUser) {
          joinNowBtn.style.display = "none"; // Hide JOIN NOW button
          orText.style.display = "none"; // Hide orText button
          playAsGuest.innerHTML = "PLAY"; // Change text to PLAY QUIZ
        }
      });
    </script>
    <!-- Script for the showing the join now button end  -->

    <!-- Script for cut the entryFeeCut Start -->
    <script>
      function cutEntryFee() {
        const totalCoins = localStorage.getItem("TotalCoin") || 0;
        const quizData = JSON.parse(localStorage.getItem("selectedQuiz"));
        const entryFee = quizData.entryFee;
        if (Number(totalCoins) >= Number(entryFee)) {
          window.location.href =
            "../../categories/quizzesForCategory/quizPlay/quiz";
        } else {
          document.getElementById("rewardContainer").classList.remove("hidden");
        }
      }
      function closeRewardModal() {
        document.getElementById("rewardContainer").classList.add("hidden");
      }

      function showToast(message, type) {
        const toast = document.querySelector(".toast");
        const progress = document.querySelector(".progress");
        const closeIcon = document.querySelector(".close");

        // Update toast message
        document.querySelector(".toast .message .text-2").innerText = message;
        if (type === "success") {
          const toastElement = document.querySelector(".toast");
          if (toastElement) {
            toastElement.classList.add("success");
            const iconElement =
              toastElement.querySelector(".toast-content img");
            if (iconElement) {
              iconElement.src = "../../../assets/images/gif/rewarded.gif";
              iconElement.alt = "reward"; // Update alt text for better semantics
            }
          }
        }

        // Show toast
        toast.classList.add("active");
        progress.classList.add("active");

        // Auto-hide toast
        let timer1 = setTimeout(() => {
          toast.classList.remove("active");
          toast.classList.add("hidden");
          window.location.href =
            "../../categories/quizzesForCategory/quizPlay/quiz/";
        }, 5000);

        let timer2 = setTimeout(() => {
          progress.classList.remove("active");
          toast.classList.remove("hidden");
          window.location.href =
            "../../categories/quizzesForCategory/quizPlay/quiz/";
        }, 5300);

        // Close toast manually
        closeIcon.addEventListener("click", () => {
          toast.classList.remove("active");
          progress.classList.remove("active");
          toast.classList.remove("hidden");
          window.location.href =
            "../../categories/quizzesForCategory/quizPlay/quiz/";

          clearTimeout(timer1);
          clearTimeout(timer2);
        });
      }

      function watchAdd() {
        const getCoins = localStorage.getItem("TotalCoin") || 0;
        const totalReward = Number(getCoins) + 100;
        localStorage.setItem("TotalCoin", totalReward);
        showToast(`100 Coins Rewarded !!`, "success");
      }
      function joinNow() {
        window.location.href = "/login";
      }
    </script>
    <!-- Script for cut the entryFeeCut End -->
  </body>
</html>
